{
  "project": {
    "name": "sixty-sales-dashboard",
    "stack": {
      "framework": "react-vite",
      "database": "supabase",
      "auth": "supabase-auth",
      "styling": "tailwind"
    }
  },
  "features": [
    {
      "id": "command-centre-evolution",
      "name": "Command Centre Evolution",
      "status": "complete",
      "createdAt": "2026-02-25"
    },
    {
      "id": "followup-email-v2",
      "name": "Follow-Up Email v2 — Quality + Demo Polish",
      "status": "complete",
      "consultReport": ".sixty/consult/followup-email-v2.md",
      "createdAt": "2026-02-25"
    },
    {
      "id": "followup-email-v3",
      "name": "Follow-Up Email v3 — Zero-Friction Delivery",
      "status": "complete",
      "createdAt": "2026-02-25"
    }
  ],
  "stories": [
    {
      "id": "FUV2-001",
      "feature": "followup-email-v2",
      "title": "Enrich analysis object with sentiment, key topics, and buying signals",
      "type": "backend",
      "status": "complete",
      "priority": 1,
      "acceptance": [
        "Meeting SELECT in generate-follow-up/index.ts includes sentiment_score, sentiment_reasoning, and summary_oneliner",
        "Analysis object populates sentiment field from sentiment_score: positive (>0.5), neutral (-0.5 to 0.5), challenging (<-0.5)",
        "Key topics extracted from summary via simple keyword extraction and populated in analysis.keyTopics",
        "Buying signals extracted from summary (budget mentions, timeline confirmations, stakeholder buy-in) populated in analysis.buyingSignals",
        "Composer prompt receives populated sentiment, keyTopics, and buyingSignals instead of empty defaults"
      ],
      "estimatedMinutes": 15,
      "actualMinutes": 12,
      "files": [
        "supabase/functions/generate-follow-up/index.ts"
      ],
      "dependencies": { "stories": [], "files": [], "schema": [] },
      "blocks": ["FUV2-002", "FUV2-008"],
      "parallelWith": ["FUV2-003", "FUV2-006"],
      "startedAt": "2026-02-25T15:10:00Z",
      "completedAt": "2026-02-25T15:22:00Z"
    },
    {
      "id": "FUV2-002",
      "feature": "followup-email-v2",
      "title": "Add regenerate-with-guidance flow (backend + frontend)",
      "type": "fullstack",
      "status": "complete",
      "priority": 2,
      "acceptance": [
        "POST endpoint accepts optional regenerate_guidance string and cached_rag_context object",
        "When guidance provided, re-composes email with same RAG context plus user instructions appended to prompt",
        "Frontend shows text input modal when Regenerate button is clicked",
        "Regenerated email replaces previous result with a 'Regenerated' badge",
        "No re-query of RAG — uses cached context from first generation (saves credits and time)"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 18,
      "files": [
        "supabase/functions/generate-follow-up/index.ts",
        "supabase/functions/_shared/follow-up/composer.ts",
        "src/pages/platform/FollowUpDemoPage.tsx"
      ],
      "dependencies": { "stories": ["FUV2-001"], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV2-004"],
      "startedAt": "2026-02-25T16:00:00Z",
      "completedAt": "2026-02-25T16:18:00Z"
    },
    {
      "id": "FUV2-003",
      "feature": "followup-email-v2",
      "title": "Render email as styled preview with subject header and signature",
      "type": "frontend",
      "status": "complete",
      "priority": 3,
      "acceptance": [
        "Email result renders in a Card with email-client styling: To field, bold subject line, body with proper paragraphs",
        "Signature (sender name) rendered in muted text below body, visually separated",
        "Markdown-style formatting (bold with **, bullet lists) parsed and rendered as HTML",
        "Links in email body rendered as clickable blue text",
        "Word count shown below email in muted text"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 15,
      "files": [
        "src/pages/platform/FollowUpDemoPage.tsx"
      ],
      "dependencies": { "stories": [], "files": [], "schema": [] },
      "blocks": ["FUV2-004"],
      "parallelWith": ["FUV2-001", "FUV2-006"],
      "startedAt": "2026-02-25T15:10:00Z",
      "completedAt": "2026-02-25T15:25:00Z"
    },
    {
      "id": "FUV2-004",
      "feature": "followup-email-v2",
      "title": "Add inline email editor with edit/preview toggle",
      "type": "frontend",
      "status": "complete",
      "priority": 4,
      "acceptance": [
        "Edit button on email preview switches to editable textarea for body and input for subject",
        "Preview button returns to styled read-only view with edited content",
        "Edited content persists in state — Copy button copies edited version",
        "Cancel button reverts to original generated content",
        "Edit state does not re-trigger generation"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 12,
      "files": [
        "src/pages/platform/FollowUpDemoPage.tsx"
      ],
      "dependencies": { "stories": ["FUV2-003"], "files": [], "schema": [] },
      "blocks": ["FUV2-005"],
      "parallelWith": ["FUV2-002"],
      "startedAt": "2026-02-25T16:20:00Z",
      "completedAt": "2026-02-25T16:32:00Z"
    },
    {
      "id": "FUV2-005",
      "feature": "followup-email-v2",
      "title": "Add Send to Slack approval button with preview block",
      "type": "fullstack",
      "status": "complete",
      "priority": 5,
      "acceptance": [
        "Send to Slack button on demo page calls generate-follow-up with delivery='slack'",
        "Backend formats email as Slack Block Kit message with approve/edit/dismiss buttons",
        "Sends to user's Slack DM channel via slack-events bot",
        "UI shows confirmation toast: 'Sent to Slack for approval'",
        "If Slack not connected, button is disabled with tooltip explaining setup"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 20,
      "files": [
        "supabase/functions/generate-follow-up/index.ts",
        "src/pages/platform/FollowUpDemoPage.tsx"
      ],
      "dependencies": { "stories": ["FUV2-004"], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": [],
      "startedAt": "2026-02-25T16:35:00Z",
      "completedAt": "2026-02-25T16:55:00Z"
    },
    {
      "id": "FUV2-006",
      "feature": "followup-email-v2",
      "title": "Show actual RAG findings in context breakdown, not just counts",
      "type": "frontend",
      "status": "complete",
      "priority": 6,
      "acceptance": [
        "Context breakdown expands to show actual findings: commitment text, concern keywords, commercial mentions",
        "Each context category is collapsible with a chevron toggle",
        "Collapsed state shows count badge, expanded shows 2-3 line summaries per category",
        "Empty categories hidden (not shown as '0 found')",
        "Backend SSE result event includes ragSummary object with category labels and snippet text"
      ],
      "estimatedMinutes": 15,
      "actualMinutes": 12,
      "files": [
        "supabase/functions/generate-follow-up/index.ts",
        "src/pages/platform/FollowUpDemoPage.tsx"
      ],
      "dependencies": { "stories": [], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV2-001", "FUV2-003"],
      "startedAt": "2026-02-25T15:30:00Z",
      "completedAt": "2026-02-25T15:42:00Z"
    },
    {
      "id": "FUV2-007",
      "feature": "followup-email-v2",
      "title": "Add step timing display and total generation time",
      "type": "fullstack",
      "status": "complete",
      "priority": 7,
      "acceptance": [
        "Each SSE step event includes durationMs field calculated from step start to complete",
        "Frontend displays duration next to each completed step: 'Loading attendees (0.3s)'",
        "Total generation time shown below all steps after completion",
        "Steps that were skipped show 'skipped' instead of a duration",
        "Running steps show elapsed time counter updating every 500ms"
      ],
      "estimatedMinutes": 15,
      "actualMinutes": 10,
      "files": [
        "supabase/functions/generate-follow-up/index.ts",
        "src/pages/platform/FollowUpDemoPage.tsx"
      ],
      "dependencies": { "stories": [], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV2-008"],
      "startedAt": "2026-02-25T15:30:00Z",
      "completedAt": "2026-02-25T15:40:00Z"
    },
    {
      "id": "FUV2-008",
      "feature": "followup-email-v2",
      "title": "Add quality degradation warnings in generation metadata",
      "type": "backend",
      "status": "complete",
      "priority": 8,
      "acceptance": [
        "SSE result event includes warnings array listing what degraded: missing writing style, no sentiment, RAG partial results, placeholder attendee",
        "Each warning has a severity (info/warn) and human-readable message",
        "Frontend renders warnings as amber badges below the context breakdown",
        "Warnings are informational only — generation still completes",
        "No warnings shown when all data sources returned successfully"
      ],
      "estimatedMinutes": 10,
      "actualMinutes": null,
      "files": [
        "supabase/functions/generate-follow-up/index.ts",
        "src/pages/platform/FollowUpDemoPage.tsx"
      ],
      "dependencies": { "stories": ["FUV2-001"], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV2-007"],
      "startedAt": "2026-02-25T15:30:00Z",
      "completedAt": "2026-02-25T15:40:00Z"
    },
    {
      "id": "FUV3-001",
      "feature": "followup-email-v3",
      "title": "Add 'Open in Gmail' deep link to Slack confirmation after draft creation",
      "type": "fullstack",
      "status": "complete",
      "priority": 1,
      "acceptance": [
        "followup_approve and followup_draft handlers in slack-interactive return draftId from google-gmail response",
        "Confirmation message includes an 'Open in Gmail' button linking to https://mail.google.com/mail/u/0/#drafts?compose=<messageId>",
        "generate-follow-up Slack delivery also includes a pre-emptive note: 'After approving, click Open in Gmail to send'",
        "Link opens in browser (Slack external link button with url type)"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 18,
      "files": [
        "supabase/functions/slack-interactive/index.ts",
        "supabase/functions/generate-follow-up/index.ts"
      ],
      "dependencies": { "stories": [], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV3-002", "FUV3-005"],
      "startedAt": "2026-02-25T19:00:00Z",
      "completedAt": "2026-02-25T19:18:00Z"
    },
    {
      "id": "FUV3-002",
      "feature": "followup-email-v3",
      "title": "Auto-trigger follow-up generation after every meeting via slack-post-meeting",
      "type": "backend",
      "status": "complete",
      "priority": 2,
      "acceptance": [
        "slack-post-meeting calls generate-follow-up with delivery='slack' after debrief analysis completes",
        "Follow-up draft lands in user's Slack DM within 2 minutes of transcript indexing",
        "Debrief message and follow-up draft are separate Slack messages (not combined)",
        "Respects proactive notification policy (quiet hours, rate limits)",
        "Skips auto-generation if meeting has no external attendees (internal meetings)"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 20,
      "files": [
        "supabase/functions/slack-post-meeting/index.ts"
      ],
      "dependencies": { "stories": [], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV3-001", "FUV3-005"],
      "startedAt": "2026-02-25T19:00:00Z",
      "completedAt": "2026-02-25T19:20:00Z"
    },
    {
      "id": "FUV3-003",
      "feature": "followup-email-v3",
      "title": "Replace 'Edit in App' with inline Slack modal for email editing",
      "type": "backend",
      "status": "complete",
      "priority": 3,
      "acceptance": [
        "followup_edit action opens a Slack modal (views.open) pre-filled with subject, recipient, and email body",
        "Modal uses plain_text_input blocks: single-line for To and Subject, multi-line for Body",
        "On submit, modal calls google-gmail?action=draft with edited content and updates the original message with confirmation",
        "Modal title shows 'Edit Follow-Up' with Save Draft and Cancel buttons",
        "Original Slack message buttons replaced with confirmation after modal submit"
      ],
      "estimatedMinutes": 30,
      "actualMinutes": 22,
      "files": [
        "supabase/functions/slack-interactive/index.ts"
      ],
      "dependencies": { "stories": ["FUV3-001"], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV3-004"],
      "startedAt": "2026-02-25T21:30:00Z",
      "completedAt": "2026-02-25T21:52:00Z"
    },
    {
      "id": "FUV3-004",
      "feature": "followup-email-v3",
      "title": "Add tone/length quick-adjust buttons to Slack follow-up message",
      "type": "fullstack",
      "status": "complete",
      "priority": 4,
      "acceptance": [
        "Slack follow-up message includes a second action row with 4 buttons: Shorter, More Formal, More Casual, Add Next Steps",
        "Each button calls generate-follow-up with regenerate_guidance set to the adjustment instruction and cached_rag_context from original",
        "Slack message is replaced (chat.update) with regenerated email content and same action buttons",
        "A small counter shows 'v2', 'v3' etc. after each regeneration in the message header",
        "Quick-adjust buttons are compact (style: default) to not visually compete with primary approve/draft buttons"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 20,
      "files": [
        "supabase/functions/generate-follow-up/index.ts",
        "supabase/functions/slack-interactive/index.ts"
      ],
      "dependencies": { "stories": ["FUV3-001"], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV3-003"],
      "startedAt": "2026-02-25T21:30:00Z",
      "completedAt": "2026-02-25T21:50:00Z"
    },
    {
      "id": "FUV3-005",
      "feature": "followup-email-v3",
      "title": "Create Gmail draft as reply-in-thread when prior thread exists with recipient",
      "type": "backend",
      "status": "complete",
      "priority": 5,
      "acceptance": [
        "Before creating draft, query Gmail API for recent threads with recipient email (q: 'to:{email} OR from:{email}' maxResults: 1)",
        "If thread found, create draft with threadId set and In-Reply-To/References headers from last message",
        "If no thread found, create draft as new email (current behavior)",
        "generate-follow-up SSE step 'compose' metadata includes threadDetected: boolean for frontend display",
        "google-gmail draft action accepts optional threadId param and sets it on the draft message"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 22,
      "files": [
        "supabase/functions/google-gmail/index.ts",
        "supabase/functions/generate-follow-up/index.ts",
        "supabase/functions/slack-interactive/index.ts"
      ],
      "dependencies": { "stories": [], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["FUV3-001", "FUV3-002"],
      "startedAt": "2026-02-25T19:00:00Z",
      "completedAt": "2026-02-25T19:22:00Z"
    }
  ],
  "execution": {
    "totalStories": 13,
    "completedStories": 13,
    "currentFeature": "followup-email-v3",
    "lastUpdated": "2026-02-25T18:00:00Z"
  }
}
