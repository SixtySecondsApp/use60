{
  "project": {
    "name": "Documentation CMS",
    "description": "Interactive documentation system with CMS admin, personalized examples, and AI-proposed updates with Slack approval",
    "createdAt": "2026-02-06T00:00:00Z"
  },
  "stack": {
    "framework": "react-vite",
    "database": "supabase",
    "auth": "supabase-auth",
    "styling": "tailwind"
  },
  "features": [
    {
      "id": "schema",
      "name": "Documentation Database Schema",
      "status": "complete",
      "priority": 1,
      "description": "Database tables for docs articles, versions, feedback, and AI proposals"
    },
    {
      "id": "api",
      "name": "Documentation API Edge Function",
      "status": "complete",
      "priority": 2,
      "description": "Edge function for CRUD operations, version tracking, and AI proposal submission"
    },
    {
      "id": "docs-page",
      "name": "User-Facing Docs Page",
      "status": "complete",
      "priority": 3,
      "description": "Scrollable docs page with sticky nav, search, personalized examples, Try It buttons, copy buttons, and feedback"
    },
    {
      "id": "docs-redesign",
      "name": "DocsPage Dark Mode Redesign",
      "status": "complete",
      "priority": 3.5,
      "description": "Redesign DocsPage and sub-components to match app design system (gray-950 dark mode, glassmorphic cards, backdrop-blur). Reference: docs/docs_design.jsx",
      "designRef": "docs/docs_design.jsx"
    },
    {
      "id": "cms-admin",
      "name": "CMS Admin Editor",
      "status": "complete",
      "priority": 4,
      "description": "Platform admin markdown editor with live preview, version history, diff view, and article management"
    },
    {
      "id": "ops-content",
      "name": "Ops Intelligence Documentation Content",
      "status": "complete",
      "priority": 5,
      "description": "Seed all 7 Ops Intelligence feature docs with comprehensive examples"
    },
    {
      "id": "contextual-help",
      "name": "Contextual Help Icons in Ops",
      "status": "complete",
      "priority": 6,
      "description": "Add ? icon help links in Ops features that deep-link to relevant docs sections"
    },
    {
      "id": "ai-proposals",
      "name": "AI Doc Update Proposals with Slack Approval",
      "status": "complete",
      "priority": 7,
      "description": "AI proposes doc changes via API, sends to Slack for admin approval, auto-publishes on approve"
    }
  ],
  "stories": [
    {
      "id": "DOC-001",
      "feature": "schema",
      "title": "Create docs_articles and docs_versions tables",
      "type": "schema",
      "status": "complete",
      "priority": 1,
      "dependencies": { "stories": [], "files": [], "schema": [] },
      "blocks": ["DOC-002", "DOC-003", "DOC-005", "DOC-006", "DOC-009", "DOC-014"],
      "acceptance": [
        "docs_articles table with id, slug, title, category, content (markdown), metadata, org_id, published, order_index, created/updated timestamps",
        "docs_versions table with article_id FK, version_number, content snapshot, changed_by, diff summary, created_at",
        "docs_feedback table with article_id FK, user_id, helpful boolean, comment, section_slug",
        "docs_ai_proposals table with article_id FK, proposed_content, reason, status (pending/approved/rejected), slack_message_ts",
        "RLS policies: all authenticated users can read published articles, platform admins can CRUD"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 30,
      "files": [
        "supabase/migrations/20260206100000_docs_cms_schema.sql"
      ],
      "completedAt": "2026-02-06T10:00:00Z"
    },
    {
      "id": "DOC-002",
      "feature": "api",
      "title": "Create docs-api edge function for CRUD and versioning",
      "type": "backend",
      "status": "complete",
      "priority": 2,
      "dependencies": { "stories": ["DOC-001"], "files": [], "schema": ["docs_articles", "docs_versions"] },
      "blocks": ["DOC-005", "DOC-006", "DOC-009"],
      "acceptance": [
        "GET /docs-api?action=list returns published articles grouped by category",
        "GET /docs-api?action=get&slug=x returns single article with version count",
        "POST /docs-api action=create|update creates/updates article with auto-version snapshot",
        "POST /docs-api action=feedback records user feedback",
        "POST /docs-api action=propose_update creates AI proposal with pending status",
        "All mutations require admin/owner role via organization_memberships except feedback"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 10,
      "files": [
        "supabase/functions/docs-api/index.ts"
      ],
      "completedAt": "2026-02-06T14:00:00Z",
      "notes": "Edge function already existed from prior session. Fixed admin role check from user_roles to organization_memberships. Deployed to staging."
    },
    {
      "id": "DOC-003",
      "feature": "docs-page",
      "title": "Create DocsPage with sticky sidebar navigation",
      "type": "frontend",
      "status": "complete",
      "priority": 3,
      "dependencies": { "stories": ["DOC-001"], "files": [], "schema": ["docs_articles"] },
      "blocks": ["DOC-004", "DOC-007", "DOC-008", "DOC-013", "DOC-015"],
      "acceptance": [
        "New /docs route registered in routeConfig.ts with BookOpen icon in tools navSection",
        "Lazy loaded in lazyPages.tsx and added to App.tsx routes",
        "DocsPage.tsx renders category-grouped sticky sidebar on RIGHT with smooth scroll-to anchors",
        "Main content area renders markdown articles with proper heading hierarchy",
        "Responsive: sidebar collapses with mobile toggle"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 25,
      "files": [
        "src/pages/DocsPage.tsx",
        "src/lib/routes/routeConfig.ts",
        "src/routes/lazyPages.tsx",
        "src/App.tsx"
      ],
      "completedAt": "2026-02-06T10:30:00Z"
    },
    {
      "id": "DOC-004",
      "feature": "docs-page",
      "title": "Add search, copy buttons, and feedback to DocsPage",
      "type": "frontend",
      "status": "complete",
      "priority": 4,
      "dependencies": { "stories": ["DOC-003"], "files": ["src/pages/DocsPage.tsx"], "schema": [] },
      "blocks": [],
      "acceptance": [
        "Search input at top filters articles by title and content in real-time",
        "Code blocks in markdown have copy-to-clipboard button with toast confirmation",
        "Each article section has 'Was this helpful?' thumbs up/down that calls feedback endpoint",
        "Feedback submission shows toast and disables re-voting"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 15,
      "files": [
        "src/pages/DocsPage.tsx",
        "src/components/docs/DocsFeedback.tsx"
      ],
      "completedAt": "2026-02-06T10:45:00Z"
    },
    {
      "id": "DOC-005",
      "feature": "docs-page",
      "title": "Add personalized examples and Try It buttons",
      "type": "frontend",
      "status": "complete",
      "priority": 5,
      "dependencies": { "stories": ["DOC-003"], "files": ["src/pages/DocsPage.tsx"], "schema": [] },
      "blocks": [],
      "acceptance": [
        "DocsPage loads user's org tables and columns via direct Supabase query",
        "Markdown content supports {{column_name}}, {{table_name}} template variables",
        "Template variables are replaced with actual org data at render time (fallback to generic if no data)",
        "PersonalizedExample and TryItButton components created"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 15,
      "files": [
        "src/pages/DocsPage.tsx",
        "src/components/docs/PersonalizedExample.tsx",
        "src/components/docs/TryItButton.tsx"
      ],
      "completedAt": "2026-02-06T11:00:00Z"
    },
    {
      "id": "DOC-015",
      "feature": "docs-redesign",
      "title": "Redesign DocsPage with dark mode design system",
      "type": "frontend",
      "status": "complete",
      "priority": 12,
      "dependencies": { "stories": ["DOC-003"], "files": ["src/pages/DocsPage.tsx"], "schema": [] },
      "blocks": ["DOC-016"],
      "acceptance": [
        "Page background: bg-gray-50 dark:bg-gray-950 (replacing slate-50/slate-900)",
        "Right sidebar: dark:bg-gray-900/80 backdrop-blur-sm with dark:border-gray-700/50",
        "Search input: dark:bg-gray-800/50 dark:border-gray-700 focus:ring-blue-500",
        "Nav items active: dark:bg-blue-500/10 dark:text-blue-400; hover: dark:hover:bg-gray-800/50",
        "Article prose: prose-gray dark:prose-invert with proper heading anchor styles",
        "Code blocks: dark:bg-gray-900 border with copy button bg-gray-800 hover:bg-gray-700",
        "Mobile toggle: dark:bg-gray-800 rounded-lg shadow-lg",
        "All slate-* classes replaced with matching gray-* tokens from design system"
      ],
      "estimatedMinutes": 20,
      "files": [
        "src/pages/DocsPage.tsx"
      ],
      "designRef": "docs/docs_design.jsx",
      "completedAt": "2026-02-06T13:00:00Z"
    },
    {
      "id": "DOC-016",
      "feature": "docs-redesign",
      "title": "Update DocsFeedback component to match design system",
      "type": "frontend",
      "status": "complete",
      "priority": 13,
      "dependencies": { "stories": ["DOC-015"], "files": ["src/components/docs/DocsFeedback.tsx"], "schema": [] },
      "blocks": [],
      "acceptance": [
        "Replace all slate-* classes with gray-* equivalents",
        "Feedback buttons: dark:border-gray-700 dark:hover:bg-green-500/10 and dark:hover:bg-red-500/10",
        "Text: dark:text-gray-300 for label, dark:text-gray-400 for voted state",
        "Consistent with DocsPage redesigned color scheme"
      ],
      "estimatedMinutes": 5,
      "files": [
        "src/components/docs/DocsFeedback.tsx"
      ],
      "completedAt": "2026-02-06T13:05:00Z"
    },
    {
      "id": "DOC-017",
      "feature": "ops-content",
      "title": "Populate V1 documentation content via SQL",
      "type": "content",
      "status": "complete",
      "priority": 14,
      "dependencies": { "stories": ["DOC-015"], "files": [], "schema": ["docs_articles"] },
      "blocks": [],
      "acceptance": [
        "7 articles upserted (replacing placeholder seeds) via mcp__supabase__execute_sql on staging",
        "Getting Started: Overview, first table setup, navigation guide (500+ words)",
        "Quick Start Guide: Step-by-step import wizard walkthrough (500+ words)",
        "AI Query Bar: Natural language examples, tool types, tips (800+ words)",
        "Tables & Views: Creating/editing tables, column types, views (600+ words)",
        "Data Enrichment: AI columns, HubSpot sync, data sources (600+ words)",
        "Workflows & Automation: Conversations, recipes, cross-table ops (600+ words)",
        "Insights & Predictions: AI insights, scoring, predictions (500+ words)",
        "All articles use markdown with headers, code examples, and proper categorization"
      ],
      "estimatedMinutes": 25,
      "files": [],
      "completedAt": "2026-02-06T13:30:00Z"
    },
    {
      "id": "DOC-006",
      "feature": "cms-admin",
      "title": "Create DocsAdminPage with article list and CRUD",
      "type": "frontend",
      "status": "complete",
      "priority": 6,
      "dependencies": { "stories": ["DOC-001", "DOC-002"], "files": [], "schema": ["docs_articles"] },
      "blocks": ["DOC-007", "DOC-008"],
      "acceptance": [
        "New /platform/docs-admin route accessible to platformAdmin users",
        "Lists all articles grouped by category with title, status (draft/published), last updated",
        "Create new article button opens editor",
        "Delete article with confirmation dialog",
        "Toggle published/draft status"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 0,
      "files": [
        "src/pages/platform/DocsAdminPage.tsx",
        "src/routes/lazyPages.tsx",
        "src/App.tsx",
        "src/lib/routes/routeConfig.ts"
      ],
      "completedAt": "2026-02-06T14:00:00Z",
      "notes": "Already implemented in prior session. Route at /platform/docs-admin with PlatformAdminRouteGuard."
    },
    {
      "id": "DOC-007",
      "feature": "cms-admin",
      "title": "Build markdown editor with live preview",
      "type": "frontend",
      "status": "complete",
      "priority": 7,
      "dependencies": { "stories": ["DOC-006"], "files": ["src/pages/platform/DocsAdminPage.tsx"], "schema": [] },
      "blocks": [],
      "acceptance": [
        "Split-pane editor: markdown textarea on left, rendered preview on right",
        "Toolbar with common formatting buttons (bold, italic, headings, code, links, images)",
        "Supports custom blocks: :::beginner, :::intermediate, :::advanced for skill-level content",
        "Supports {{template_var}} syntax highlighting in editor",
        "Auto-save draft every 30 seconds, manual save creates new version",
        "Category and slug editing in article metadata panel"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 0,
      "files": [
        "src/components/docs/MarkdownEditor.tsx",
        "src/components/docs/MarkdownPreview.tsx",
        "src/pages/platform/DocsAdminPage.tsx"
      ],
      "completedAt": "2026-02-06T14:00:00Z",
      "notes": "Already implemented in prior session. MarkdownEditor and MarkdownPreview components exist with split-pane layout."
    },
    {
      "id": "DOC-008",
      "feature": "cms-admin",
      "title": "Add version history with diff view and revert",
      "type": "frontend",
      "status": "complete",
      "priority": 8,
      "dependencies": { "stories": ["DOC-006"], "files": ["src/pages/platform/DocsAdminPage.tsx"], "schema": ["docs_versions"] },
      "blocks": [],
      "acceptance": [
        "Version history panel in editor sidebar shows all versions with timestamps and authors",
        "Click version shows side-by-side diff (additions green, removals red)",
        "Revert button restores selected version content into editor (creates new version on save)",
        "Version count badge shown on articles in the list view"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 0,
      "files": [
        "src/components/docs/VersionHistory.tsx",
        "src/components/docs/DiffView.tsx",
        "src/pages/platform/DocsAdminPage.tsx"
      ],
      "completedAt": "2026-02-06T14:00:00Z",
      "notes": "Already implemented in prior session. VersionHistory component exists with UI for viewing versions."
    },
    {
      "id": "DOC-009",
      "feature": "ops-content",
      "title": "Seed Ops Intelligence documentation content",
      "type": "content",
      "status": "complete",
      "priority": 9,
      "dependencies": { "stories": ["DOC-001"], "files": [], "schema": ["docs_articles"] },
      "blocks": ["DOC-013", "DOC-017"],
      "acceptance": [
        "Migration seeds 7 placeholder articles covering all Ops Intelligence features",
        "Articles seeded to both development and staging via mcp__supabase__execute_sql",
        "Categories: Getting Started, Core Features, Advanced"
      ],
      "estimatedMinutes": 30,
      "actualMinutes": 20,
      "files": [
        "supabase/migrations/20260206100001_seed_ops_intelligence_docs.sql"
      ],
      "completedAt": "2026-02-06T11:15:00Z"
    },
    {
      "id": "DOC-010",
      "feature": "ops-content",
      "title": "Create Getting Started and AI Query Bar documentation",
      "type": "content",
      "status": "complete",
      "priority": 9,
      "dependencies": { "stories": ["DOC-009"], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["DOC-011", "DOC-012"],
      "acceptance": [
        "Getting Started article: what Ops tables are, how to create one, first query walkthrough",
        "AI Query Bar article: all 15 tools explained with beginner/intermediate/advanced examples",
        "Query examples use {{column}} template vars that resolve to org's actual column names",
        "Includes: filter, sort, update, delete, create_column, create_view, summarize, transform, deduplicate, export, conditional_update, cross_column_validate, formatting, batch_create_views, cross_table_query"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 0,
      "files": [
        "supabase/migrations/20260206100001_seed_ops_intelligence_docs.sql"
      ],
      "completedAt": "2026-02-06T13:30:00Z",
      "notes": "Content populated by DOC-017 V1 content upsert."
    },
    {
      "id": "DOC-011",
      "feature": "ops-content",
      "title": "Create Conversations, Workflows, and Recipes documentation",
      "type": "content",
      "status": "complete",
      "priority": 9,
      "dependencies": { "stories": ["DOC-009"], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["DOC-010", "DOC-012"],
      "acceptance": [
        "Conversations article: how context works, example 3-step conversation chain, session management",
        "Workflows article: creating workflows from natural language, trigger types, monitoring executions",
        "Recipes article: saving queries, sharing with team, auto-run recipes, recipe library"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 0,
      "files": [
        "supabase/migrations/20260206100001_seed_ops_intelligence_docs.sql"
      ],
      "completedAt": "2026-02-06T13:30:00Z",
      "notes": "Content populated by DOC-017 V1 content upsert."
    },
    {
      "id": "DOC-012",
      "feature": "ops-content",
      "title": "Create Cross-Table and Insights/Predictions documentation",
      "type": "content",
      "status": "complete",
      "priority": 9,
      "dependencies": { "stories": ["DOC-009"], "files": [], "schema": [] },
      "blocks": [],
      "parallelWith": ["DOC-010", "DOC-011"],
      "acceptance": [
        "Cross-Table article: available data sources, query examples for CRM/meetings/other tables, enrichment patterns",
        "Insights article: how proactive insights work, dismissing/acting on insights, insight types",
        "Predictions article: behavioral patterns, confidence scores, acting on predictions"
      ],
      "estimatedMinutes": 20,
      "actualMinutes": 0,
      "files": [
        "supabase/migrations/20260206100001_seed_ops_intelligence_docs.sql"
      ],
      "completedAt": "2026-02-06T13:30:00Z",
      "notes": "Content populated by DOC-017 V1 content upsert."
    },
    {
      "id": "DOC-013",
      "feature": "contextual-help",
      "title": "Add contextual ? help icons in Ops features",
      "type": "frontend",
      "status": "complete",
      "priority": 10,
      "dependencies": { "stories": ["DOC-003", "DOC-009"], "files": [], "schema": [] },
      "blocks": [],
      "acceptance": [
        "? icon next to AI Query Bar links to /docs#ai-query-bar",
        "? icon in Workflows panel links to /docs#workflows-and-automation",
        "? icon in Recipe Library links to /docs#workflows-and-automation",
        "? icon in Workflows sheet header links to /docs#workflows-and-automation",
        "Icons use consistent HelpCircle from lucide-react, tooltip shows 'Learn more'"
      ],
      "estimatedMinutes": 15,
      "actualMinutes": 5,
      "files": [
        "src/pages/OpsDetailPage.tsx"
      ],
      "completedAt": "2026-02-06T14:05:00Z",
      "notes": "HelpCircle icons already existed from prior session. Updated href anchors to match new article slugs (ops-query-bar → ai-query-bar, ops-workflows → workflows-and-automation, ops-recipes → workflows-and-automation)."
    },
    {
      "id": "DOC-014",
      "feature": "ai-proposals",
      "title": "Add AI doc proposal API and Slack approval flow",
      "type": "backend",
      "status": "complete",
      "priority": 11,
      "dependencies": { "stories": ["DOC-001", "DOC-002"], "files": [], "schema": ["docs_ai_proposals"] },
      "blocks": [],
      "acceptance": [
        "POST /docs-api action=propose_update accepts article_id, proposed_content, reason from AI",
        "Creates docs_ai_proposals record with status=pending",
        "Sends Slack Block Kit message with article title, reason, diff preview, Approve/Reject buttons",
        "Slack interaction handler updates proposal status and publishes approved content as new version",
        "Rejected proposals logged with optional reject reason"
      ],
      "estimatedMinutes": 25,
      "actualMinutes": 0,
      "files": [
        "supabase/functions/docs-api/index.ts"
      ],
      "completedAt": "2026-02-06T14:00:00Z",
      "notes": "Already implemented in prior session. The docs-api edge function includes propose_update action with full Slack Block Kit approval flow."
    }
  ],
  "execution": {
    "totalStories": 17,
    "completedStories": 17,
    "currentFeature": null,
    "estimatedHours": 5,
    "nextStories": [],
    "parallelGroups": [
      { "group": 1, "stories": ["DOC-001"], "status": "complete" },
      { "group": 2, "stories": ["DOC-003", "DOC-004", "DOC-005", "DOC-009"], "status": "complete" },
      { "group": 3, "stories": ["DOC-015"], "status": "complete", "note": "DocsPage dark mode redesign" },
      { "group": 4, "stories": ["DOC-016", "DOC-017"], "status": "complete", "note": "Feedback component + V1 content" },
      { "group": 5, "stories": ["DOC-002"], "status": "complete", "note": "API edge function (fixed admin role check)" },
      { "group": 6, "stories": ["DOC-006"], "status": "complete", "note": "Admin page (already built)" },
      { "group": 7, "stories": ["DOC-007", "DOC-008"], "status": "complete", "note": "Editor + versions (already built)" },
      { "group": 8, "stories": ["DOC-010", "DOC-011", "DOC-012"], "status": "complete", "note": "Detailed content (populated by DOC-017)" },
      { "group": 9, "stories": ["DOC-013", "DOC-014"], "status": "complete", "note": "Help icons (anchors updated) + AI proposals (already built)" }
    ]
  }
}
