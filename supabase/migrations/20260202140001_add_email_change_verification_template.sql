-- EMAIL-TEMPLATE-1: Add email_change_verification template to encharge_email_templates table
-- Used for sending verification emails when users request to change their email address
-- Matches the design style of password_reset and welcome email templates

INSERT INTO encharge_email_templates (
  template_name,
  template_type,
  subject_line,
  html_body,
  text_body,
  variables,
  is_active,
  created_at,
  updated_at
) VALUES (
  'Email Change Verification',
  'email_change_verification',
  'Confirm Your Email Change - {{first_name}}',
  '<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="color-scheme" content="light"><meta name="supported-color-schemes" content="light"><title>Confirm Your Email Change - Sixty Seconds</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"><style type="text/css">body, table, td, p, a, li, blockquote { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }table, td { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }img { -ms-interpolation-mode: bicubic; border: 0; outline: none; text-decoration: none; }html {color-scheme: light !important;background-color: #030712 !important;margin: 0 !important;padding: 0 !important;height: 100% !important;}body {color-scheme: light !important;background-color: #030712 !important;margin: 0 !important;padding: 0 !important;height: 100% !important;width: 100% !important;-webkit-text-fill-color: #F3F4F6 !important;}* {color-scheme: light !important;forced-color-adjust: none !important;}u + .body .gmail-blend-screen,u + .body .gmail-blend-difference,.msg-html-content,.msg-html-content *,[data-ogsc] .msg-html-content,[data-ogsc] .msg-html-content * {background-color: #111827 !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;forced-color-adjust: none !important;}u + .body {background-color: #111827 !important;color-scheme: light !important;}@media screen and (-webkit-min-device-pixel-ratio: 0) {.msg-html-content,.msg-html-content table,.msg-html-content td {background-color: #111827 !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}.msg-html-content h1,.msg-html-content h2,.msg-html-content h3,.msg-html-content .email-title {color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}.msg-html-content p,.msg-html-content .email-welcome-text,.msg-html-content .email-list-text,.msg-html-content .email-subtitle {color: #F3F4F6 !important;-webkit-text-fill-color: #F3F4F6 !important;}}[data-ogsc] * {color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}[data-ogsc] p,[data-ogsc] .email-welcome-text,[data-ogsc] .email-list-text,[data-ogsc] .email-subtitle {color: #F3F4F6 !important;-webkit-text-fill-color: #F3F4F6 !important;}@media only screen and (max-width: 600px) {html, body {width: 100% !important;max-width: 100% !important;margin: 0 !important;padding: 0 !important;height: auto !important;min-height: auto !important;background-color: #111827 !important;color-scheme: dark !important;forced-color-adjust: none !important;overflow-x: hidden !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}@media (prefers-color-scheme: light) {html, body {background-color: #111827 !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;color-scheme: dark !important;}}body > table,body > table > tbody > tr > td {background-color: #111827 !important;padding: 0 !important;margin: 0 !important;width: 100% !important;max-width: 100% !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}body > table > tbody > tr > td[align="center"] {padding: 0 !important;}body > table,body > table > tbody,body > table > tbody > tr {height: auto !important;min-height: auto !important;max-height: none !important;}.email-container {width: 100% !important;max-width: 100% !important;margin: 0 !important;border-radius: 0 !important;background-color: #111827 !important;forced-color-adjust: none !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}.email-header {padding: 32px 20px 24px !important;background-color: #111827 !important;background: linear-gradient(135deg, #111827 0%, #1F2937 100%) !important;forced-color-adjust: none !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}.email-logo {width: 64px !important;height: 64px !important;max-width: 64px !important;}.email-title {font-size: 24px !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;forced-color-adjust: none !important;}.email-header .email-title,.email-header h1 {color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;background-color: transparent !important;forced-color-adjust: none !important;}.email-subtitle {font-size: 16px !important;color: #F3F4F6 !important;-webkit-text-fill-color: #F3F4F6 !important;forced-color-adjust: none !important;}.email-content {padding: 24px 20px !important;background-color: #111827 !important;forced-color-adjust: none !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}.email-content table,.email-content table tr,.email-content table td {background-color: #111827 !important;forced-color-adjust: none !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}.email-welcome-text {font-size: 15px !important;color: #F3F4F6 !important;-webkit-text-fill-color: #F3F4F6 !important;background-color: #111827 !important;forced-color-adjust: none !important;}.email-section-title {font-size: 11px !important;margin-bottom: 16px !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;background-color: #111827 !important;forced-color-adjust: none !important;}.email-list-text {font-size: 13px !important;line-height: 1.6 !important;color: #F3F4F6 !important;-webkit-text-fill-color: #F3F4F6 !important;background-color: #111827 !important;forced-color-adjust: none !important;}.email-button {padding: 12px 24px !important;font-size: 15px !important;}.email-footer {padding: 20px !important;background-color: #111827 !important;forced-color-adjust: none !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}.email-footer-text {font-size: 13px !important;color: #D1D5DB !important;-webkit-text-fill-color: #D1D5DB !important;forced-color-adjust: none !important;}.email-footer-small {font-size: 11px !important;color: #9CA3AF !important;-webkit-text-fill-color: #9CA3AF !important;forced-color-adjust: none !important;}body > div,body > table > tbody > tr > td > div {min-height: auto !important;height: auto !important;}}@media only screen and (max-width: 600px) {html, body, table, tbody, tr, td, div, p, a, span, h1, h2, h3 {color-scheme: dark !important;background-color: #111827 !important;forced-color-adjust: none !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}.email-header h1,.email-header .email-title,.email-header h1.email-title,.email-header td h1,.email-header td .email-title {color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;background-color: transparent !important;text-shadow: none !important;}body > div[style*="background-color: #FFFFFF"],body > div[style*="background-color: #fff"],body > div[style*="background-color: white"] {background-color: #111827 !important;}body > div:first-child {background-color: #111827 !important;color: #FFFFFF !important;-webkit-text-fill-color: #FFFFFF !important;}}</style></head><body style="margin: 0 !important; padding: 0 !important; font-family: ''Inter'', -apple-system, BlinkMacSystemFont, ''Segoe UI'', Roboto, sans-serif; background-color: #030712 !important; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; color-scheme: light !important; forced-color-adjust: none !important; -webkit-text-fill-color: #FFFFFF !important; color: #FFFFFF !important; width: 100% !important;"><div style="background-color: #111827 !important; min-height: 100vh; width: 100% !important; margin: 0 !important; padding: 0 !important;"><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #030712 !important; padding: 0; margin: 0 auto; width: 100% !important; forced-color-adjust: none !important;"><tr style="background-color: #030712 !important;"><td align="center" style="padding: 20px 0; background-color: #030712 !important; forced-color-adjust: none !important;"><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="600" class="email-container" style="max-width: 600px; width: 100%; background-color: #111827 !important; border-radius: 16px; overflow: hidden; border: 1px solid #374151 !important; forced-color-adjust: none !important; -webkit-text-fill-color: #F3F4F6 !important; mso-table-lspace: 0pt; mso-table-rspace: 0pt;"><tr style="background-color: #111827 !important;"><td class="email-header" style="padding: 48px 40px 32px; text-align: center; background-color: #111827 !important; background: linear-gradient(135deg, #111827 0%, #1F2937 100%) !important; forced-color-adjust: none !important; -webkit-text-fill-color: #FFFFFF !important; color: #FFFFFF !important;"><img src="https://ygdpgliavpxeugaajgrb.supabase.co/storage/v1/object/public/Logos/ac4efca2-1fe1-49b3-9d5e-6ac3d8bf3459/Icon.png" alt="Sixty Seconds" width="80" height="80" class="email-logo" style="display: block; margin: 0 auto 24px; border: 0; max-width: 80px; width: 80px; height: auto; forced-color-adjust: none !important; background-color: transparent !important;" /><h1 class="email-title" style="color: #FFFFFF !important; -webkit-text-fill-color: #FFFFFF !important; font-size: 28px; font-weight: 700; margin: 0 0 12px 0; line-height: 1.2; letter-spacing: -0.02em; background-color: transparent !important; forced-color-adjust: none !important; text-shadow: none !important;">Confirm Your Email Change ✉️</h1><p class="email-subtitle" style="color: #F3F4F6 !important; -webkit-text-fill-color: #F3F4F6 !important; font-size: 18px; margin: 0; line-height: 1.5; font-weight: 400; background-color: transparent !important; forced-color-adjust: none !important;">We need to verify your new email address</p></td></tr><tr style="background-color: #111827 !important; forced-color-adjust: none !important;"><td class="email-content" style="padding: 40px 40px; background-color: #111827 !important; forced-color-adjust: none !important; -webkit-text-fill-color: #F3F4F6 !important; color: #F3F4F6 !important;"><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 32px; background-color: #111827 !important; forced-color-adjust: none !important;"><tr style="background-color: #111827 !important; forced-color-adjust: none !important;"><td style="background-color: #111827 !important; forced-color-adjust: none !important;"><p class="email-welcome-text" style="color: #F3F4F6 !important; -webkit-text-fill-color: #F3F4F6 !important; font-size: 16px; line-height: 1.7; margin: 0 0 20px 0; text-align: center; background-color: #111827 !important; forced-color-adjust: none !important;">Hi {{first_name}},</p><p class="email-welcome-text" style="color: #F3F4F6 !important; -webkit-text-fill-color: #F3F4F6 !important; font-size: 16px; line-height: 1.7; margin: 0 0 20px 0; background-color: #111827 !important; forced-color-adjust: none !important;">You requested to change your email address from <strong style="color: #FFFFFF !important;">{{old_email}}</strong> to <strong style="color: #FFFFFF !important;">{{new_email}}</strong>.</p><p class="email-welcome-text" style="color: #F3F4F6 !important; -webkit-text-fill-color: #F3F4F6 !important; font-size: 16px; line-height: 1.7; margin: 0; background-color: #111827 !important; forced-color-adjust: none !important;">Click the button below to confirm this change. Your email will be updated immediately after verification.</p></td></tr></table><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 32px; background-color: #111827 !important; forced-color-adjust: none !important;"><tr style="background-color: #111827 !important; forced-color-adjust: none !important;"><td align="center" style="padding-bottom: 24px; background-color: #111827 !important; forced-color-adjust: none !important;"><a href="{{verification_link}}" class="email-button" style="display: inline-block; padding: 14px 32px; background-color: #3B82F6 !important; background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%) !important; color: #FFFFFF !important; -webkit-text-fill-color: #FFFFFF !important; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); line-height: 1.4; forced-color-adjust: none !important;">Confirm Email Change</a></td></tr></table><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 32px; background-color: #111827 !important; forced-color-adjust: none !important;"><tr style="background-color: #111827 !important; forced-color-adjust: none !important;"><td style="background-color: #111827 !important; forced-color-adjust: none !important;"><p class="email-list-text" style="color: #9CA3AF !important; -webkit-text-fill-color: #9CA3AF !important; font-size: 12px; margin: 0 0 8px 0; text-align: center; background-color: #111827 !important; forced-color-adjust: none !important;">Or copy this link:</p><p style="color: #3B82F6 !important; -webkit-text-fill-color: #3B82F6 !important; font-size: 11px; margin: 0; text-align: center; word-break: break-all; background-color: #1F2937 !important; padding: 12px 16px; border-radius: 8px; border: 1px solid #374151 !important; line-height: 1.4; font-family: ''Courier New'', monospace;">{{verification_link}}</p></td></tr></table><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #111827 !important; forced-color-adjust: none !important; border: 1px solid #374151 !important; border-radius: 8px; padding: 20px;"><tr style="background-color: #111827 !important; forced-color-adjust: none !important;"><td style="background-color: #111827 !important; forced-color-adjust: none !important;"><p class="email-list-text" style="color: #F3F4F6 !important; -webkit-text-fill-color: #F3F4F6 !important; font-size: 13px; margin: 0 0 8px 0; font-weight: 500; background-color: #111827 !important; forced-color-adjust: none !important;">⏰ Expires: {{expiry_time}}</p><p class="email-list-text" style="color: #9CA3AF !important; -webkit-text-fill-color: #9CA3AF !important; font-size: 12px; margin: 0; background-color: #111827 !important; forced-color-adjust: none !important;">This link will expire in 24 hours. If you didn''t request this change, you can safely ignore this email.</p></td></tr></table></td></tr><tr style="background-color: #111827 !important;"><td class="email-footer" style="padding: 24px 40px; text-align: center; background-color: #111827 !important; border-top: 1px solid #374151 !important; forced-color-adjust: none !important; -webkit-text-fill-color: #D1D5DB !important;"><p class="email-footer-text" style="color: #D1D5DB !important; -webkit-text-fill-color: #D1D5DB !important; font-size: 14px; margin: 0 0 8px 0; font-weight: 500; line-height: 1.4; background-color: transparent !important; forced-color-adjust: none !important;">Sent by Sixty Seconds</p><p class="email-footer-small" style="color: #9CA3AF !important; -webkit-text-fill-color: #9CA3AF !important; font-size: 12px; margin: 0; line-height: 1.4; background-color: transparent !important; forced-color-adjust: none !important;">Questions? Reply to this email and we''ll help you out.</p></td></tr></table></td></tr></table></div></body></html>',
  'CONFIRM YOUR EMAIL CHANGE

Hi {{first_name}},

You requested to change your email address from {{old_email}} to {{new_email}}.

Click the link below to confirm this change:
{{verification_link}}

Your email will be updated immediately after verification.

---

EXPIRY NOTICE
Link expires in 24 hours. If you didn''t request this change, you can safely ignore this email.

SECURITY NOTICE
If you don''t recognize this request, please contact our support team immediately.

---

Questions? Reply to this email and we''ll help you out.

Sent by Sixty Seconds
© 2025 Sixty Seconds - AI Sales Assistant',
  '{"first_name": "User first name", "old_email": "Previous email address", "new_email": "New email address", "verification_link": "Email verification link", "expiry_time": "Link expiry time (e.g., in 24 hours)"}',
  true,
  NOW(),
  NOW()
) ON CONFLICT DO NOTHING;
